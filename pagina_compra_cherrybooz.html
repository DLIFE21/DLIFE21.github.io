<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CherryBooz - Confirmar Pedido</title>
<style>
  body { font-family: Arial, sans-serif; background:#f9f9f9; margin:0; padding:20px; }
  .container { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
  h1 { color: #a52a2a; text-align:center; }
  p { font-size: 1.1em; }
  label { display:block; margin: 10px 0 5px; }
  input[type=text], input[type=number] { width: 100%; padding: 8px; font-size: 1em; border-radius:4px; border:1px solid #ccc; }
  select { width: 100%; padding: 8px; font-size: 1em; border-radius:4px; border:1px solid #ccc; }
  button { background: #a52a2a; color: white; border:none; padding: 12px 20px; border-radius:4px; cursor:pointer; font-size: 1.1em; width: 100%; margin-top: 20px; }
  button:hover { background: #8b2020; }
  .pago-tarjeta { margin-top: 15px; display:none; animation: fadeIn 0.5s ease forwards; }
  @keyframes fadeIn {
    from { opacity: 0;}
    to { opacity: 1;}
  }
  .gracias {
    text-align:center;
    font-size: 1.5em;
    color: #228822;
    margin-top: 20px;
    display: none;
  }
</style>
</head>
<body>

<div class="container" id="pedido-container">
  <h1>Confirmar Pedido</h1>
  <p><strong>Licor seleccionado:</strong> <span id="licor-text"></span></p>
  <p><strong>Cantidad:</strong> <span id="cantidad-text"></span></p>
  <p><strong>Precio unitario:</strong> RD$ 5000</p>
  <p><strong>Total:</strong> RD$ <span id="total-text"></span></p>

  <label for="tipo-pago">Tipo de Pago:</label>
  <select id="tipo-pago">
    <option value="">-- Seleccione --</option>
    <option value="tarjeta">Pago con tarjeta</option>
    <option value="contra-entrega">Pago contra entrega</option>
  </select>

  <div class="pago-tarjeta" id="form-tarjeta">
    <label for="nombre-tarjeta">Nombre en la tarjeta:</label>
    <input type="text" id="nombre-tarjeta" placeholder="Juan Pérez" />
    <label for="num-tarjeta">Número de tarjeta:</label>
    <input type="text" id="num-tarjeta" maxlength="16" placeholder="1234 5678 9012 3456" />
    <label for="exp-tarjeta">Fecha de expiración (MM/AA):</label>
    <input type="text" id="exp-tarjeta" maxlength="5" placeholder="12/25" />
    <label for="cvv-tarjeta">CVV:</label>
    <input type="number" id="cvv-tarjeta" maxlength="3" placeholder="123" />
  </div>

  <button id="btn-confirmar">Confirmar Pedido</button>

  <div class="gracias" id="mensaje-gracias">
    ¡Gracias por tu compra! Tu pedido está en proceso.
  </div>
</div>

<script>
  const licorText = document.getElementById('licor-text');
  const cantidadText = document.getElementById('cantidad-text');
  const totalText = document.getElementById('total-text');
  const tipoPago = document.getElementById('tipo-pago');
  const formTarjeta = document.getElementById('form-tarjeta');
  const btnConfirmar = document.getElementById('btn-confirmar');
  const mensajeGracias = document.getElementById('mensaje-gracias');
  const pedidoContainer = document.getElementById('pedido-container');

  const PRECIO_UNITARIO = 5000;

  // Cargar datos del localStorage
  const licorSeleccionado = localStorage.getItem('licorSeleccionado') || 'No seleccionado';
  const cantidadSeleccionada = parseInt(localStorage.getItem('cantidadSeleccionada'), 10) || 0;

  licorText.textContent = licorSeleccionado.charAt(0).toUpperCase() + licorSeleccionado.slice(1);
  cantidadText.textContent = cantidadSeleccionada;
  totalText.textContent = (PRECIO_UNITARIO * cantidadSeleccionada).toLocaleString();

  tipoPago.addEventListener('change', () => {
    if (tipoPago.value === 'tarjeta') {
      formTarjeta.style.display = 'block';
    } else {
      formTarjeta.style.display = 'none';
    }
  });

  btnConfirmar.addEventListener('click', () => {
    if (!tipoPago.value) {
      alert('Selecciona un tipo de pago.');
      return;
    }

    if (tipoPago.value === 'tarjeta') {
      const nombre = document.getElementById('nombre-tarjeta').value.trim();
      const numTarjeta = document.getElementById('num-tarjeta').value.trim();
      const expTarjeta = document.getElementById('exp-tarjeta').value.trim();
      const cvvTarjeta = document.getElementById('cvv-tarjeta').value.trim();

      if (!nombre || !numTarjeta || !expTarjeta || !cvvTarjeta) {
        alert('Completa todos los datos de la tarjeta.');
        return;
      }
      if (!/^\d{16}$/.test(numTarjeta.replace(/\s+/g, ''))) {
        alert('Número de tarjeta inválido.');
        return;
      }
      if (!/^\d{2}\/\d{2}$/.test(expTarjeta)) {
        alert('Formato de fecha de expiración inválido.');
        return;
      }
      if (!/^\d{3}$/.test(cvvTarjeta)) {
        alert('CVV inválido.');
        return;
      }
    }

    // Mostrar mensaje de gracias y ocultar el formulario
    pedidoContainer.style.display = 'none';
    mensajeGracias.style.display = 'block';
    // Limpiar localStorage
    localStorage.clear();
  });
</script>

</body>
</html>

